(function(){"use strict";angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(e,t,n){var r=window.PointerEvent?1:window.MSPointerEvent?2:"ontouchend"in document?3:4,i=".rangeSlider",s={disabled:false,orientation:"horizontal",step:0,decimalPlaces:0,showValues:true,preventEqualMinMax:false,attachHandleValues:false},o=(r===1?"pointerdown":r===2?"MSPointerDown":r===3?"touchstart":"mousedown")+i,u=(r===1?"pointermove":r===2?"MSPointerMove":r===3?"touchmove":"mousemove")+i,a=(r===1?"pointerup":r===2?"MSPointerUp":r===3?"touchend":"mouseup")+i,f=function(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(t){return["x","y"]}},l=function(e){return e<0?0:e>100?100:e},c=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};if(r<4){angular.element("html").addClass("ngrs-touch")}else{angular.element("html").addClass("ngrs-no-touch")}return{restrict:"A",replace:true,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:{disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@"},link:function(r,h,p,d){function T(e){if(e==="min"){angular.element(m[0]).css("display","none");angular.element(m[1]).css("display","block")}else if(e==="max"){angular.element(m[0]).css("display","block");angular.element(m[1]).css("display","none")}else{angular.element(m[0]).css("display","block");angular.element(m[1]).css("display","block")}}function N(e){if(e){v.addClass("disabled")}else{v.removeClass("disabled")}}function C(){if(r.min>r.max){A("min must be less than or equal to max")}if(angular.isDefined(r.min)&&angular.isDefined(r.max)){if(!c(r.min)){A("min must be a number")}if(!c(r.max)){A("max must be a number")}x=r.max-r.min;S=[r.min,r.max];k()}}function k(){if(r.modelMin>r.modelMax){O("modelMin must be less than or equal to modelMax");r.modelMin=r.modelMax}if((angular.isDefined(r.modelMin)||r.pinHandle==="min")&&(angular.isDefined(r.modelMax)||r.pinHandle==="max")){if(!c(r.modelMin)){if(r.pinHandle!=="min"){O("modelMin must be a number")}r.modelMin=r.min}if(!c(r.modelMax)){if(r.pinHandle!=="max"){O("modelMax must be a number")}r.modelMax=r.max}var e=l((r.modelMin-r.min)/x*100),n=l((r.modelMax-r.min)/x*100);if(r.attachHandleValues){var i=e,s=n}r.modelMin=Math.max(r.min,r.modelMin);r.modelMax=Math.min(r.max,r.modelMax);if(r.filter){r.filteredModelMin=t(r.filter)(r.modelMin,r.filterOptions);r.filteredModelMax=t(r.filter)(r.modelMax,r.filterOptions)}else{r.filteredModelMin=r.modelMin;r.filteredModelMax=r.modelMax}if(r.min===r.max&&r.modelMin==r.modelMax){angular.element(m[0]).css(b,"0%");angular.element(m[1]).css(b,"100%");if(r.attachHandleValues){angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles");angular.element(g[0]).css(b,"0%");angular.element(g[1]).css(b,"100%")}angular.element(y).css(b,"0%").css(w,"0%")}else{angular.element(m[0]).css(b,e+"%");angular.element(m[1]).css(b,n+"%");if(r.attachHandleValues){angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles");angular.element(g[0]).css(b,i+"%");angular.element(g[1]).css(b,s+"%");angular.element(g[1]).css(w,"auto")}angular.element(y).css(b,e+"%").css(w,100-n+"%");if(e>95){angular.element(m[0]).css("z-index",3)}}}}function L(t){var n=m[t];n.bind(o+"X",function(s){var o=(t===0?"ngrs-handle-min":"ngrs-handle-max")+"-down",c=n.add(e).add("body"),h=(t===0?r.modelMin:r.modelMax)-r.min,p=h/x*100,d=f(s),m=d,g=false;if(angular.isFunction(r.onHandleDown)){r.onHandleDown()}angular.element("body").bind("selectstart"+i,function(){return false});if(!r.disabled){n.addClass("ngrs-down");v.addClass("ngrs-focus "+o);angular.element("body").addClass("ngrs-touching");e.bind(u,function(e){e.preventDefault();var i=f(e),s,o,u,a=r.step/x*100,c=((t===0?r.modelMax:r.modelMin)-r.min)/x*100;if(i[0]==="x"){return}i[0]-=d[0];i[1]-=d[1];s=[m[0]!==i[0],m[1]!==i[1]];o=p+i[E]*100/(E?v.height():v.width());o=l(o);if(r.preventEqualMinMax){if(a===0){a=1/x*100}if(t===0){c=c-a}else if(t===1){c=c+a}}if(t===0){o=o>c?c:o}else if(t===1){o=o<c?c:o}if(r.step>0){if(o<100&&o>0){o=Math.round(o/a)*a}}if(o>95&&t===0){n.css("z-index",3)}else{n.css("z-index","")}if(s[E]&&o!=g){if(t===0){r.modelMin=parseFloat(o*x/100+r.min).toFixed(r.decimalPlaces)}else if(t===1){r.modelMax=parseFloat(o*x/100+r.min).toFixed(r.decimalPlaces)}r.$apply();g=o}m=i}).bind(a,function(){if(angular.isFunction(r.onHandleUp)){r.onHandleUp()}c.off(i);angular.element("body").removeClass("ngrs-touching");n.removeClass("ngrs-down");v.removeClass("ngrs-focus "+o)})}})}function A(e){r.disabled=true;throw new Error("RangeSlider: "+e)}function O(e){n.warn(e)}var v=angular.element(h),m=[h.find(".ngrs-handle-min"),h.find(".ngrs-handle-max")],g=[h.find(".ngrs-value-min"),h.find(".ngrs-value-max")],y=h.find(".ngrs-join"),b="left",w="right",E=0,S=[0,0],x=0;r.filteredModelMin=r.modelMin;r.filteredModelMax=r.modelMax;p.$observe("disabled",function(e){if(!angular.isDefined(e)){r.disabled=s.disabled}r.$watch("disabled",N)});p.$observe("orientation",function(e){if(!angular.isDefined(e)){r.orientation=s.orientation}var t=r.orientation.split(" "),n;for(var i=0,o=t.length;i<o;i++){t[i]="ngrs-"+t[i]}n=t.join(" ");v.addClass(n);if(r.orientation==="vertical"||r.orientation==="vertical left"||r.orientation==="vertical right"){b="top";w="bottom";E=1}});p.$observe("step",function(e){if(!angular.isDefined(e)){r.step=s.step}});p.$observe("decimalPlaces",function(e){if(!angular.isDefined(e)){r.decimalPlaces=s.decimalPlaces}});p.$observe("showValues",function(e){if(!angular.isDefined(e)){r.showValues=s.showValues}else{if(e==="false"){r.showValues=false}else{r.showValues=true}}});p.$observe("pinHandle",function(e){if(!angular.isDefined(e)){r.pinHandle=null}else{if(e==="min"||e==="max"){r.pinHandle=e}else{r.pinHandle=null}}r.$watch("pinHandle",T)});p.$observe("preventEqualMinMax",function(e){if(!angular.isDefined(e)){r.preventEqualMinMax=s.preventEqualMinMax}else{if(e==="false"){r.preventEqualMinMax=false}else{r.preventEqualMinMax=true}}});p.$observe("attachHandleValues",function(e){if(!angular.isDefined(e)){r.attachHandleValues=s.attachHandleValues}else{if(e==="false"){r.attachHandleValues=false}else{r.attachHandleValues=true}}});r.$watch("min",C);r.$watch("max",C);r.$watch("modelMin",k);r.$watch("modelMax",k);r.$on("$destroy",function(){v.off(i);angular.element("body").off(i);e.off(i);for(var t=0,n=m.length;t<n;t++){m[t].off(i);m[t].off(i+"X")}});v.bind("selectstart"+i,function(e){return false}).bind("click",function(e){e.stopPropagation()});L(0);L(1)}}}]);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()})()